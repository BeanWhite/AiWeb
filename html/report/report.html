<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="report.css" />
		<script src="../../js/jquery-3.4.1.js"></script>


		<script type="text/javascript" src="../../js/vue.min.js"></script>


		<title></title>

	</head>
	<style>
		@media print {
			@page {
				size: A4 portrait;
				margin: 2.5cm 2cm 3cm 2cm;
				padding: 0;

				@top-center {
					width: 100%;
					height: 100%;
					content: element(divHeader);
				}

				@bottom-center {
					width: 100%;
					height: 100%;
					content: element(divFooter);
				}

			}

			/**
			 *  *****@page:和first之间不能有空格，否则该部分不会被加载****
			 */
			/* @page:first {
				size: A4 portrait;
				margin: 3.5cm 2cm 3.5cm 2cm;
				padding: 0;
				@top-center {
					width: 100%;
					height: 100%;
					content: element(firstPageHead);
				}
			} */

			.ti {
				display: none;
			}

			/**
			 * 自定义分页
			 */
			.break-before {
				page-break-before: always;
			}

			.break-after {
				page-break-after: always;
			}

			/* 第一个h1标题不需要分页 */
			.first-h1 {
				margin: 0;
				padding: 0;
				page-break-before: avoid;
			}

			/* 所有h1标题需要分页 */
			h1 {
				page-break-before: always;
				width: 100%;
				text-align: center;
			}

			.text-center {
				width: 100%;
				text-align: center;
			}




			/* fix相当于body,需要在fix中重新布局 */
			.header-fix {
				position: absolute;
				height: 100%;
				width: 100%;
				display: flex;
				flex-direction: column;
				justify-content: flex-start;
				align-items: center;
			}

			.footer-fix {
				position: absolute;
				height: 100%;
				width: 100%;
			}

			#footer-box {
				height: 100%;
				width: 100%;
			}

			#report-date {}

			#office {}

			.line-top {
				display: flex;
				justify-content: space-between;
				border-bottom: 1px solid black;
			}

			.line-center {
				margin-top: 2px;
				border-top: 3px solid black;
			}

			.line-bottom {
				margin-top: 3px;
				border-bottom: 1px solid black;
			}

			#page-num {
				width: 100%;
				text-align: center;
				content: "(第"counter(page)"页/共"counter(pages)"页)";
			}

			button {
				display: none;
			}

			#firstPageHead {
				font-size: 12px;
				position: running(firstPageHead);
				prince-flow: static(firstPageHead, start) width: 100%;
				height: 100%;
			}

			#divHeader {
				font-size: 12px;
				position: running(divHeader);
				prince-flow: static(divHeader, start) width: 100%;
				height: 100px;
				/* background-color: green; */
			}

			#divFooter {
				font-size: 12px;
				position: running(divFooter);
				width: 100%;
				/* background-color: red; */
				height: 100%;
			}

			.bc {
				width: 100%;
			}

			.top {
				display: none;
			}

			.bottom {
				display: none;
			}

			.pr {
				display: initial;
				margin: 20px;
			}

			.ot {
				display: none;
			}

			.header-content {
				font-size: 12px;
				width: 100%;
				height: 100%;
				display: flex;
				justify-content: space-between;
				align-items: flex-start;
				padding-top: 10px;
			}

			/**
			 * 阿尔茨海默样式
			 */

			

		}
	</style>
	<style type="text/css">
		html {
			width: 100%;
		}

		h1,
		h2,
		h3,
		h4,
		h5,
		h6,
		p {
			margin: 0;
			padding: 0;
		}

		body {
			overflow: auto;
			margin: 0;
			padding: 0;
		}

		h1 {
			width: 100%;
			text-align: center;
		}

		ul,
		li {
			list-style: none;
			margin: 0;
			padding: 0;
		}

		.font-12 {
			font-size: 12px;
		}

		.pdf {
			visibility: hidden;
			opacity: 0;
		}

		.line-top {
			width: 100%;
			display: flex;
			justify-content: space-between;
			border-bottom: 1px solid black;
		}

		.line-center {
			width: 100%;
			margin-top: 1px;
			border-top: 3px solid black;
		}

		.line-bottom {
			width: 100%;
			margin-top: 1px;
			border-bottom: 1px solid black;
		}

		.line-bottom-darkgray {
			width: 100%;
			border-bottom: 1px solid #BBBBBB;
		}

		.msg {
			width: 100%;
			height: auto;
			display: flex;
			justify-content: center;
			align-items: center;
			flex-wrap: wrap;
		}

		.msg-item {
			display: inline-block;
			font-size: 12px;
			width: 24%;
			height: 24px;
			line-height: 24px;
			text-align: center;
			/* background-color: #0096E1; */
		}

		.tab-items {
			width: 100%;
			height: auto;
			display: flex;
			justify-content: center;
		}

		.msg-item-a {
			margin-left: 20px;
		}

		.tab-msg-item {
			width: 100%;
			display: flex;
			justify-content: space-around;
			align-items: center;
			margin: 5px;
		}

		.report-img {
			width: 100%;
			height: auto;
			display: flex;
			flex-wrap: wrap;
			justify-content: space-around;
			align-items: center;
		}

		.report-img-list {
			position: relative;
			width: calc(50% - 15px);
			height: auto;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
		}

		.report-img-item {
			/* width: calc(20% - 15px); */
			width: 200px;
		}

		.top-left-corner {
			position: absolute;
			top: 20px;
			left: 20px;
		}

		.use-time {
			margin-top: 20px;
			margin-bottom: 20px;
			width: 100%;
			height: auto;
		}


		.footer-content {
			font-size: 12px;
			width: 100%;
			height: 100%;
		}

		.on {
			display: none;
		}

		.off {
			display: initial;
		}

		.header-left-content {
			height: 40px;
			line-height: 40px;
			position: relative;
			padding-left: 45px;
			font-family: kartika;
		}
		.header-right-content {
			color: #2c9cdc;
			text-align: right;
		}
		@media screen {
			.page {
				min-height: 980px;
				border: solid 1px black;
			}
			
			.pr{
				display: none;
			}
		}
	</style>
	<body>
		
		<button onclick="printPDF()" style="position: fixed; top: 50px;left: 50px;">666666</button>

		<!-- 用于打印显示的页眉页脚 -->
		<div id="divHeader">
			<div class="header-fix">
				<div class="header-content">
					<div class="header-left-content">
						<svg xmlns="http://www.w3.org/2000/svg" class="svg-icon an-icon ant-plus-circle" viewBox="64 64 896 896" width="24"
						 height="24" style="fill: rgba(34, 130, 34, 0.99); position: absolute;left: 10px;top: 0;
						 bottom: 0; margin: auto 0;">
							<path d="M696 480H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"></path>
							<path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path>
						</svg>
						重庆市精神卫生中心
					</div>
					<div class="header-right-content">
						<p>测评结果反映被测人最新状态</p>
						<p>仅用于专业诊断参考</p>
					</div>
				</div>
				<h1 class="first-h1">心理健康测评报告</h1>
				<div class="line-top"></div>
				<div class="line-center"></div>
				<div class="line-bottom"></div>
			</div>
		</div>
		<div id="divFooter">
			<div class="footer-fix">
				<div class="footer-content">
					<div style="width: 100%;display: flex;justify-content: space-between;">
						<span style="text-align: left;">报告日期:{{date}}</span>
						<span style="text-align: right;">科室:{{office}}</span>
					</div>
					<div class="line-top"></div>
					<div class="line-center"></div>
					<div class="line-bottom"></div>
					<div id="page-num"></div>
					<div style="width: 100%;display: flex;justify-content: space-between;">
						<ul>
							<li>重庆市北碚区精神卫生中心</li>
							<li>地址:重庆市北碚区</li>
							<li>电话:123456,48484848</li>
						</ul>
						<!-- <ul style="text-align: center;">
							<li>
								<img style="width: 40px;height: 40px;background-color: #008B8B;">
							</li>
							<li>
								测评二维码
							</li>
						</ul> -->
					</div>
				</div>
			</div>
		</div>
		<!--  打印页面-->
		<div class="page bc vue" style="position: relative;">
			<div v-for="(rep,i) in reportSize" v-bind:class="i>0?'break-before':''" v-if="rep!=5">
				<!-- <h1 class="ot">心理健康测评报告</h1> -->
				<div class="line-top ot"></div>
				<div class="line-center ot"></div>
				<div class="line-bottom ot"></div>

				<!-- 基本信息 -->
				<ul class="msg">
					<li class="msg-item" v-for="it in msgObject"><span class="msg-item-a">{{it.msg_a}}</span><span class="msg-item-b">{{it.msg_b}}</span></li>
				</ul>
				<div class="line-top"></div>
				<h2 class="text-center">{{config[rep].title}}</h2>
				<div class="line-top"></div>
				<div class="line-bottom"></div>

				<!-- 项目名称 -->
				<ul class="msg">
					<li class="tab-msg-item" style="width: 100%;">
						<div v-for="(it,index) in $data[config[rep].properName].rTableObject" style="text-align: center;width: 100%;">
							{{it}}
						</div>
					</li>
					<!-- 结果数组 -->
					<li class="tab-msg-item" v-for="(i3,ind_3) in $data[config[rep].properName].allResult" >
						<div v-for="(it,index) in i3" style="width: 100%; text-align: center;">
							{{it}}
						</div>
					</li>
				</ul>

				<div class="line-top"></div>
				<div class="line-bottom"></div>
				<!-- 在图片上方添加分页符 -->

				<h3 class="text-center" v-if="$data[config[rep].properName].serviceImg.length>0">患者结果图</h3>
				<ul class="report-img" v-if="$data[config[rep].properName].serviceImg.length>0">
					<li v-for="(it,index) in $data[config[rep].properName].serviceImg" class="report-img-list">
						<div class="top-left-corner">{{it.title}}</div>
						<!-- .pr为打印时使用,ot为查看时使用 -->
						
						<img :src="it.localURL" class="report-img-item ot">
						<img :src="imgURL+'/'+it.proURL" class="report-img-item pr ">
					</li>
				</ul>

				<div class="use-time" v-if="getUserTime">
					<span>作答时长:</span><span>{{getUserTime}}</span>
				</div>
				<div style="text-decoration: underline;align-self: flex-start;" v-if="getClusion">
					<span class="line-bottom">总结论:</span>
				</div>
				<div class="all-result" style="align-self: flex-start;" v-if="getClusion">
					<span v-for="(clu,ind) in $data[config[rep].properName].bottomMsg">{{clu}}</span>
					
				</div>
				<div style="width: 90%;text-align: right;">
					施测人:
				</div>
			</div>
		</div>

	</body>
	<script src="../utils/Storage.js"></script>
	<script src="../config/urlConfig.js"></script>
	<script src="report.js"></script>

</html>
